<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
    <meta charset="utf-8">
    <meta name="generator" content="quarto-1.6.37">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

    <meta name="author" content="Frank Aragona">
    <meta name="dcterms.date" content="2024-02-27">
    <meta name="description" content="Get counts and make plots/tables of sequences in WDRS and elsewhere">

    <title>Pipeline Counts</title>
    <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      div.columns{display: flex; gap: min(4vw, 1.5em);}
      div.column{flex: auto; overflow-x: auto;}
      div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
      ul.task-list{list-style: none;}
      ul.task-list li input[type="checkbox"] {
        width: 0.8em;
        margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
        vertical-align: middle;
      }
      /* CSS for syntax highlighting */
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
        }
      pre.numberSource { margin-left: 3em;  padding-left: 4px; }
      div.sourceCode
        {   }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
    </style>

    <style>
      body.hypothesis-enabled #quarto-embed-header {
        padding-right: 36px;
      }

      #quarto-embed-header {
        height: 3em;
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: solid 1px;
      }

      #quarto-embed-header h6 {
        font-size: 1.1em;
        padding-top: 0.6em;
        margin-left: 1em;
        margin-right: 1em;
        font-weight: 400;
      }

      #quarto-embed-header a.quarto-back-link,
      #quarto-embed-header a.quarto-download-embed {
        font-size: 0.8em;
        margin-top: 1em;
        margin-bottom: 1em;
        margin-left: 1em;
        margin-right: 1em;
      }

      .quarto-back-container {
        padding-left: 0.5em;
        display: flex;
      }

      .headroom {
          will-change: transform;
          transition: transform 200ms linear;
      }

      .headroom--pinned {
          transform: translateY(0%);
      }

      .headroom--unpinned {
          transform: translateY(-100%);
      }      
    </style>

    <script>
    window.document.addEventListener("DOMContentLoaded", function () {

      var header = window.document.querySelector("#quarto-embed-header");
      const titleBannerEl = window.document.querySelector("body > #title-block-header");
      if (titleBannerEl) {
        titleBannerEl.style.paddingTop = header.clientHeight + "px";
      }
      const contentEl = window.document.getElementById('quarto-content');
      for (const child of contentEl.children) {
        child.style.paddingTop = header.clientHeight + "px";
        child.style.marginTop = "1em";
      }

      // Use the article root if the `back` call doesn't work. This isn't perfect
      // but should typically work
      window.quartoBackToArticle = () => {
        var currentUrl = window.location.href;
        window.history.back();
        setTimeout(() => {
            // if location was not changed in 100 ms, then there is no history back
            if(currentUrl === window.location.href){              
                // redirect to site root
                window.location.href = "...html";
            }
        }, 100);
      }

      const headroom = new window.Headroom(header, {
        tolerance: 5,
        onPin: function () {
        },
        onUnpin: function () {
        },
      });
      headroom.init();
    });
    </script>

    
<script src="../site_libs/manuscript-notebook/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-29e2c20b02301cfff04dc8050bf30c7e.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-a5e92929936548ece8858722a26d2119.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
     <script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>  
      </head>

  <body class="quarto-notebook">
    <div id="quarto-embed-header" class="headroom fixed-top bg-primary">
      
      <a onclick="window.quartoBackToArticle(); return false;" class="btn btn-primary quarto-back-link" href=""><i class="bi bi-caret-left"></i> Back to Article</a>
      <h6><i class="bi bi-journal-code"></i> Pipeline Counts</h6>

            <a href="../notebooks/pipeline_counts.qmd" class="btn btn-primary quarto-download-embed" download="pipeline_counts.qmd">Download Source</a>
          </div>

     <header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Pipeline Counts</h1>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
        
        <div class="quarto-title-meta">

                <div>
            <div class="quarto-title-meta-heading">Author</div>
            <div class="quarto-title-meta-contents">
                        <p>Frank Aragona </p>
                      </div>
          </div>
                
                <div>
            <div class="quarto-title-meta-heading">Published</div>
            <div class="quarto-title-meta-contents">
              <p class="date">February 27, 2024</p>
            </div>
          </div>
          
                <div>
            <div class="quarto-title-meta-heading">Modified</div>
            <div class="quarto-title-meta-contents">
              <p class="date-modified">December 10, 2024</p>
            </div>
          </div>
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      </div>
    </div>



    <div class="quarto-other-links-text-target">
    </div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#libraries" id="toc-libraries" class="nav-link active" data-scroll-target="#libraries">Libraries</a></li>
  <li><a href="#get-data" id="toc-get-data" class="nav-link" data-scroll-target="#get-data">Get Data</a></li>
  <li><a href="#count-summary" id="toc-count-summary" class="nav-link" data-scroll-target="#count-summary">Count Summary</a></li>
  <li><a href="#counts-by-lab" id="toc-counts-by-lab" class="nav-link" data-scroll-target="#counts-by-lab">Counts by Lab</a></li>
  <li><a href="#counts-by-lab-1" id="toc-counts-by-lab-1" class="nav-link" data-scroll-target="#counts-by-lab-1">Counts by lab</a></li>
  <li><a href="#create-stacked-bar-plots" id="toc-create-stacked-bar-plots" class="nav-link" data-scroll-target="#create-stacked-bar-plots">Create stacked bar plots</a>
  <ul class="collapse">
  <li><a href="#proportion-plot" id="toc-proportion-plot" class="nav-link" data-scroll-target="#proportion-plot">Proportion Plot</a></li>
  <li><a href="#count-plot" id="toc-count-plot" class="nav-link" data-scroll-target="#count-plot">Count Plot</a></li>
  </ul></li>
  <li><a href="#combine-the-plots" id="toc-combine-the-plots" class="nav-link" data-scroll-target="#combine-the-plots">Combine the plots</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">      

       <section id="libraries" class="level1">
<h1>Libraries</h1>
<p>And read in custom functions</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [1]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">box.path =</span> <span class="fu">getwd</span>())</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "C:/Users/FAA3303/Projects/sequencing1.0_sanitized/docs/notebooks"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>box<span class="sc">::</span><span class="fu">use</span>(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  DBI[dbConnect,dbGetQuery],</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  odbc[odbc],</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  lubridate[...],</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  pins[...],</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  tibble[...],</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  dplyr[...],</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  magrittr[<span class="st">`</span><span class="at">%&gt;%</span><span class="st">`</span>],</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  purrr[...],</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  data.table[...],</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  readxl[read_xlsx],</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  vroom[vroom],</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  readr[...],</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  rio[import],</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  stringr[...],</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  gt[...],</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  gtExtras[...],</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  stats[na.omit],</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  tidyr[...],</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  scripts<span class="sc">/</span>functions[...],</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  scripts<span class="sc">/</span>read_for_review[...],</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  scripts<span class="sc">/</span>read_fuzzy[...],</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  scripts<span class="sc">/</span>read_keep_na[...]</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Registered S3 methods overwritten by 'readr':
  method                    from 
  as.data.frame.spec_tbl_df vroom
  as_tibble.spec_tbl_df     vroom
  format.col_spec           vroom
  print.col_spec            vroom
  print.collector           vroom
  print.date_names          vroom
  print.locale              vroom
  str.col_spec              vroom</code></pre>
</div>
</div></div>
</section>
<section id="get-data" class="level1">
<h1>Get Data</h1>
<div class="cell-container"><div class="cell-decorator"><pre>In [2]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ------ Read in all tables and get counts ------ #</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#' @export</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#' match in wdrs or keep_na</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#' </span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">#' @description</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">#' Find a match in WDRS or Keep_NA and assign it a new column. Used to get counts and filter</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co">#' </span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param df a dataframe</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>match_in_wdrs_keep_na <span class="ot">&lt;-</span> <span class="cf">function</span>(df){</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">in_wdrs =</span> <span class="fu">case_when</span>(</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>      SEQUENCE_CLINICAL_ACCESSION <span class="sc">%in%</span> </span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">na.omit</span>(wdrs_seq<span class="sc">$</span>SEQUENCE_CLINICAL_ACCESSION_NUMBER) <span class="sc">|</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>        SEQUENCE_ACCESSION <span class="sc">%in%</span> </span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>        <span class="fu">na.omit</span>(wdrs_seq<span class="sc">$</span>SEQUENCE_GISAID_STRAIN) <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">in_keep_na =</span> <span class="fu">case_when</span>(</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>      SEQUENCE_CLINICAL_ACCESSION <span class="sc">%in%</span> </span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>        <span class="fu">na.omit</span>(keep_na2<span class="sc">$</span>SEQUENCE_CLINICAL_ACCESSION) <span class="sc">|</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>        SEQUENCE_ACCESSION <span class="sc">%in%</span> </span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>        <span class="fu">na.omit</span>(keep_na2<span class="sc">$</span>SEQUENCE_ACCESSION) <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in keep_na - this reads in the saved keep_na pin</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>keep_na <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(),<span class="st">"docs/notebooks/data/keep_na.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
• `` -&gt; `...1`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 19855 Columns: 137
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (22): file_name, SEQUENCE_SPECIMEN, SEQUENCE_REASON, SEQUENCE_LAB, SEQU...
dbl   (3): ...1, CASE_ID, GISAID_ID_YEAR
lgl (112): SEQUENCE_SGTF, SEQUENCE_DATE, Virus name, Accession ID, Collectio...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># keep_na_extract() %&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># as_tibble() %&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># tweak_gisaid_id(.$SEQUENCE_ACCESSION) %&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate(across(everything(), as.character))</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in keep_na - this runs the keep_na read function to read in newest data</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># this will take ~ 10 min to run. Only necessary if the pin is out of date</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># keep_na &lt;- keep_na_extract() %&gt;%</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   as_tibble() %&gt;%</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">#   tweak_gisaid_id(.$SEQUENCE_ACCESSION)</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co"># connect</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>connection <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbConnect</span>(odbc<span class="sc">::</span><span class="fu">odbc</span>(), </span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>                             <span class="at">Driver =</span> creds<span class="sc">$</span>default<span class="sc">$</span>conn_list_wdrs<span class="sc">$</span>Driver, </span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>                             <span class="at">Server =</span> creds<span class="sc">$</span>default<span class="sc">$</span>conn_list_wdrs<span class="sc">$</span>Server, </span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>                             <span class="at">Database =</span> creds<span class="sc">$</span>default<span class="sc">$</span>conn_list_wdrs<span class="sc">$</span>Database, </span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>                             <span class="at">Trusted_connection =</span> creds<span class="sc">$</span>default<span class="sc">$</span>conn_list_wdrs<span class="sc">$</span>Trusted_connection, </span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>                             <span class="at">ApplicationIntent =</span> creds<span class="sc">$</span>default<span class="sc">$</span>conn_list_wdrs<span class="sc">$</span>ApplicationIntent)</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>wdrs_seq <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbGetQuery</span>(</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  connection,</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  <span class="st">"</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a><span class="st">  SELECT *</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a><span class="st">  FROM DD_GCD_COVID19_SEQUENCING</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a><span class="st">  WHERE SEQUENCE_SPECIMEN = 'YES'</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a><span class="st">  AND CASE_STATUS IN (0, 3)</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a><span class="st">  ORDER BY SEQUENCE_ROSTER_PREPARE_DATE DESC;</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a><span class="st">  "</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove any rec</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>wdrs_seq <span class="ot">&lt;-</span> wdrs_seq <span class="sc">%&gt;%</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">in_keep_na =</span> <span class="fu">case_when</span>(</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>    SEQUENCE_CLINICAL_ACCESSION_NUMBER <span class="sc">%in%</span> </span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>      <span class="fu">na.omit</span>(keep_na<span class="sc">$</span>SEQUENCE_CLINICAL_ACCESSION) <span class="sc">|</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>      SEQUENCE_GISAID_STRAIN <span class="sc">%in%</span> </span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>      <span class="fu">na.omit</span>(keep_na<span class="sc">$</span>SEQUENCE_ACCESSION) <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), as.character)) <span class="sc">%&gt;%</span></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(SEQUENCE_ROSTER_PREPARE_DATE <span class="sc">&lt;</span> <span class="st">'2023-09-11'</span> <span class="sc">|</span> <span class="fu">is.na</span>(SEQUENCE_ROSTER_PREPARE_DATE))</span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>wdrs_count <span class="ot">&lt;-</span> wdrs_seq <span class="sc">%&gt;%</span></span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(in_keep_na == 0) %&gt;%</span></span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a><span class="co"># This keep_na count needs to run below WDRS chunk because it needs to remove</span></span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a><span class="co"># any records that are in WDRS</span></span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a>keep_na2 <span class="ot">&lt;-</span> keep_na  <span class="sc">%&gt;%</span></span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">in_wdrs =</span><span class="fu">if_else</span>(</span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a>    SEQUENCE_CLINICAL_ACCESSION <span class="sc">%in%</span> <span class="fu">na.omit</span>(</span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a>      wdrs_seq<span class="sc">$</span>SEQUENCE_CLINICAL_ACCESSION_NUMBER</span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span>,</span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a>    <span class="dv">0</span></span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">in_wdrs_SA =</span> <span class="fu">if_else</span>(</span>
<span id="cb9-64"><a href="#cb9-64" aria-hidden="true" tabindex="-1"></a>    SEQUENCE_ACCESSION <span class="sc">%in%</span> <span class="fu">na.omit</span>(</span>
<span id="cb9-65"><a href="#cb9-65" aria-hidden="true" tabindex="-1"></a>      wdrs_seq<span class="sc">$</span>SEQUENCE_GISAID_STRAIN</span>
<span id="cb9-66"><a href="#cb9-66" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb9-67"><a href="#cb9-67" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span>,</span>
<span id="cb9-68"><a href="#cb9-68" aria-hidden="true" tabindex="-1"></a>    <span class="dv">0</span></span>
<span id="cb9-69"><a href="#cb9-69" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb9-70"><a href="#cb9-70" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb9-71"><a href="#cb9-71" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(in_wdrs <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> in_wdrs_SA <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb9-72"><a href="#cb9-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-73"><a href="#cb9-73" aria-hidden="true" tabindex="-1"></a>keep_na_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(keep_na2)</span>
<span id="cb9-74"><a href="#cb9-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-75"><a href="#cb9-75" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in for_review</span></span>
<span id="cb9-76"><a href="#cb9-76" aria-hidden="true" tabindex="-1"></a>for_review_df <span class="ot">&lt;-</span> <span class="fu">for_review_extract</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-77"><a href="#cb9-77" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Find a match in WDRS or keep_na</span></span>
<span id="cb9-78"><a href="#cb9-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">match_in_wdrs_keep_na</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-79"><a href="#cb9-79" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Split SEQUENCE_ACCESSION for partial matching</span></span>
<span id="cb9-80"><a href="#cb9-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tweak_gisaid_id</span>(.<span class="sc">$</span>SEQUENCE_ACCESSION)</span>
<span id="cb9-81"><a href="#cb9-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-82"><a href="#cb9-82" aria-hidden="true" tabindex="-1"></a>for_review_count <span class="ot">&lt;-</span> for_review_df <span class="sc">%&gt;%</span></span>
<span id="cb9-83"><a href="#cb9-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(in_wdrs <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> in_keep_na <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-84"><a href="#cb9-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span>
<span id="cb9-85"><a href="#cb9-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-86"><a href="#cb9-86" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in fuzzy</span></span>
<span id="cb9-87"><a href="#cb9-87" aria-hidden="true" tabindex="-1"></a>fuzzy_df <span class="ot">&lt;-</span> <span class="fu">fuzzy_extract</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-88"><a href="#cb9-88" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Find a match in WDRS or keep_na</span></span>
<span id="cb9-89"><a href="#cb9-89" aria-hidden="true" tabindex="-1"></a>  <span class="fu">match_in_wdrs_keep_na</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-90"><a href="#cb9-90" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Split SEQUENCE_ACCESSION for partial matching</span></span>
<span id="cb9-91"><a href="#cb9-91" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tweak_gisaid_id</span>(.<span class="sc">$</span>SEQUENCE_ACCESSION)</span>
<span id="cb9-92"><a href="#cb9-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-93"><a href="#cb9-93" aria-hidden="true" tabindex="-1"></a>fuzzy_count <span class="ot">&lt;-</span> fuzzy_df <span class="sc">%&gt;%</span></span>
<span id="cb9-94"><a href="#cb9-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(in_wdrs <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> in_keep_na <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-95"><a href="#cb9-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
</section>
<section id="count-summary" class="level1">
<h1>Count Summary</h1>
<div class="cell-container"><div class="cell-decorator"><pre>In [3]:</pre></div><div class="cell">

<div class="cell-container"><div class="cell-decorator"><pre>In [4]:</pre></div><div><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ------ Create Final Table of Counts ------ #</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the Counts</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>pipeline_counts <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>Location, <span class="sc">~</span>Count,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"For Review"</span>, for_review_count,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Fuzzy Review"</span>, fuzzy_count,</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Keep NA"</span>, keep_na_count,</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"WDRS"</span>, wdrs_count) <span class="sc">%&gt;%</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get the Percents</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">freq =</span> scales<span class="sc">::</span><span class="fu">label_percent</span>()(Count <span class="sc">/</span> <span class="fu">sum</span>(Count))) <span class="sc">%&gt;%</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get the Totals</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">adorn_totals</span>()</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Take the counts and put them in a table.</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="co"># use the gt table for html stuff</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Convert to a GT table and style it</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>(gt_counts <span class="ot">&lt;-</span> pipeline_counts <span class="sc">%&gt;%</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_merge_n_pct</span>(</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_n =</span> Count,</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_pct =</span> freq</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> Count,</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">0</span>,</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">use_seps =</span> T</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Highlight the WDRS row</span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt_highlight_rows</span>(</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>     <span class="at">rows =</span> Location <span class="sc">==</span> <span class="st">"WDRS"</span>,</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>     <span class="at">fill =</span> <span class="st">"#8b7d7b"</span>,</span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>     <span class="at">bold_target_only =</span> <span class="cn">TRUE</span>,</span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>     <span class="at">target_col =</span> Count</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>   ) <span class="sc">%&gt;%</span></span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="st">"left"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> </span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>               <span class="fu">md</span>(<span class="st">"Covid Sequencing Pipeline Counts"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">style_table</span>()</span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a><span class="co"># make a kable table - these are the only tables that can be output with a manuscript project</span></span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a><span class="co"># pipeline_counts %&gt;% </span></span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(Count = paste0(Count," (",freq,")")) %&gt;% </span></span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(-freq) %&gt;%</span></span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a><span class="co">#   knitr::kable()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div><div id="tbl-counts" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-counts-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Count of sequences matching to WDRS cases
</figcaption>
<div aria-describedby="tbl-counts-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="gzagugjuxk" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>@import url("https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
#gzagugjuxk table {
  font-family: Roboto, system-ui, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#gzagugjuxk thead, #gzagugjuxk tbody, #gzagugjuxk tfoot, #gzagugjuxk tr, #gzagugjuxk td, #gzagugjuxk th {
  border-style: none;
}

#gzagugjuxk p {
  margin: 0;
  padding: 0;
}

#gzagugjuxk .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #000000;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gzagugjuxk .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#gzagugjuxk .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#gzagugjuxk .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#gzagugjuxk .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gzagugjuxk .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gzagugjuxk .gt_col_headings {
  border-top-style: solid;
  border-top-width: 3px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gzagugjuxk .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gzagugjuxk .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gzagugjuxk .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gzagugjuxk .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gzagugjuxk .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gzagugjuxk .gt_spanner_row {
  border-bottom-style: hidden;
}

#gzagugjuxk .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#gzagugjuxk .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#gzagugjuxk .gt_from_md > :first-child {
  margin-top: 0;
}

#gzagugjuxk .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gzagugjuxk .gt_row {
  padding-top: 3px;
  padding-bottom: 3px;
  padding-left: 10px;
  padding-right: 10px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#gzagugjuxk .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 10px;
  padding-right: 10px;
}

#gzagugjuxk .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#gzagugjuxk .gt_row_group_first td {
  border-top-width: 2px;
}

#gzagugjuxk .gt_row_group_first th {
  border-top-width: 2px;
}

#gzagugjuxk .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gzagugjuxk .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#gzagugjuxk .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#gzagugjuxk .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gzagugjuxk .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gzagugjuxk .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#gzagugjuxk .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#gzagugjuxk .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#gzagugjuxk .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gzagugjuxk .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gzagugjuxk .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gzagugjuxk .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gzagugjuxk .gt_sourcenote {
  font-size: 12px;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gzagugjuxk .gt_left {
  text-align: left;
}

#gzagugjuxk .gt_center {
  text-align: center;
}

#gzagugjuxk .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gzagugjuxk .gt_font_normal {
  font-weight: normal;
}

#gzagugjuxk .gt_font_bold {
  font-weight: bold;
}

#gzagugjuxk .gt_font_italic {
  font-style: italic;
}

#gzagugjuxk .gt_super {
  font-size: 65%;
}

#gzagugjuxk .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#gzagugjuxk .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#gzagugjuxk .gt_indent_1 {
  text-indent: 5px;
}

#gzagugjuxk .gt_indent_2 {
  text-indent: 10px;
}

#gzagugjuxk .gt_indent_3 {
  text-indent: 15px;
}

#gzagugjuxk .gt_indent_4 {
  text-indent: 20px;
}

#gzagugjuxk .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="2" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">Covid Sequencing Pipeline Counts</td>
    </tr>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" style="border-bottom-width: 3px; border-bottom-style: solid; border-bottom-color: black;" scope="col" id="Location">Location</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" style="border-bottom-width: 3px; border-bottom-style: solid; border-bottom-color: black;" scope="col" id="Count">Count</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Location" class="gt_row gt_left">For Review</td>
<td headers="Count" class="gt_row gt_left">220 (0.13%)</td></tr>
    <tr><td headers="Location" class="gt_row gt_left">Fuzzy Review</td>
<td headers="Count" class="gt_row gt_left">569 (0.33%)</td></tr>
    <tr><td headers="Location" class="gt_row gt_left">Keep NA</td>
<td headers="Count" class="gt_row gt_left">5,710 (3.32%)</td></tr>
    <tr><td headers="Location" class="gt_row gt_left" style="background-color: rgba(139,125,123,0.8);">WDRS</td>
<td headers="Count" class="gt_row gt_left" style="background-color: rgba(139,125,123,0.8); color: #000000; font-weight: bold;">165,551 (96.22%)</td></tr>
    <tr><td headers="Location" class="gt_row gt_left">Total</td>
<td headers="Count" class="gt_row gt_left">172,050 (-)</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
</figure>
</div></div></div>
</div></div>
</section>
<section id="counts-by-lab" class="level1">
<h1>Counts by Lab</h1>
<div class="cell-container"><div class="cell-decorator"><pre>In [5]:</pre></div><div class="cell">

<div class="cell-container"><div class="cell-decorator"><pre>In [6]:</pre></div><div><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ------ Summary of the Tables ------ #</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>lab_counts <span class="ot">&lt;-</span> wdrs_seq <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SEQUENCE_LAB =</span> forcats<span class="sc">::</span><span class="fu">fct_explicit_na</span>(SEQUENCE_LAB)) <span class="sc">%&gt;%</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SEQUENCE_STATUS =</span> forcats<span class="sc">::</span><span class="fu">fct_explicit_na</span>(SEQUENCE_STATUS)) <span class="sc">%&gt;%</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(SEQUENCE_STATUS,SEQUENCE_LAB) <span class="sc">%&gt;%</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(SEQUENCE_STATUS,SEQUENCE_LAB) <span class="sc">%&gt;%</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> SEQUENCE_STATUS,<span class="at">values_from =</span> n) <span class="sc">%&gt;%</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Complete)) <span class="sc">%&gt;%</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">adorn_totals</span>()</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Get counts by lab by status gt</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>(gt_lab_counts <span class="ot">&lt;-</span> lab_counts <span class="sc">%&gt;%</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt</span>(</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="sc">-</span>SEQUENCE_LAB,</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">fns =</span> <span class="cf">function</span>(x) <span class="fu">ifelse</span>(<span class="fu">is.na</span>(x), <span class="st">"—"</span>, x)</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data_color</span>(<span class="at">columns =</span> Complete,</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>             <span class="at">rows =</span> SEQUENCE_LAB <span class="sc">!=</span> <span class="st">"Total"</span>,</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>             <span class="at">direction =</span> <span class="st">"column"</span>, </span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>             <span class="at">palette =</span> <span class="st">"Purples"</span>,</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">style_table</span>()</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Get counts by status kable</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a><span class="co"># options(knitr.kable.NA = '-')</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a><span class="co"># lab_counts %&gt;%</span></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a><span class="co">#   knitr::kable()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div><div id="tbl-labcount-status" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-labcount-status-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Count of sequences by lab and status
</figcaption>
<div aria-describedby="tbl-labcount-status-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="mapgifxvqp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>@import url("https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
#mapgifxvqp table {
  font-family: Roboto, system-ui, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#mapgifxvqp thead, #mapgifxvqp tbody, #mapgifxvqp tfoot, #mapgifxvqp tr, #mapgifxvqp td, #mapgifxvqp th {
  border-style: none;
}

#mapgifxvqp p {
  margin: 0;
  padding: 0;
}

#mapgifxvqp .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #000000;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mapgifxvqp .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#mapgifxvqp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mapgifxvqp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mapgifxvqp .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mapgifxvqp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mapgifxvqp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 3px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mapgifxvqp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mapgifxvqp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mapgifxvqp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mapgifxvqp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mapgifxvqp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mapgifxvqp .gt_spanner_row {
  border-bottom-style: hidden;
}

#mapgifxvqp .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#mapgifxvqp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mapgifxvqp .gt_from_md > :first-child {
  margin-top: 0;
}

#mapgifxvqp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mapgifxvqp .gt_row {
  padding-top: 3px;
  padding-bottom: 3px;
  padding-left: 10px;
  padding-right: 10px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mapgifxvqp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 10px;
  padding-right: 10px;
}

#mapgifxvqp .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#mapgifxvqp .gt_row_group_first td {
  border-top-width: 2px;
}

#mapgifxvqp .gt_row_group_first th {
  border-top-width: 2px;
}

#mapgifxvqp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mapgifxvqp .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#mapgifxvqp .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#mapgifxvqp .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mapgifxvqp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mapgifxvqp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mapgifxvqp .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#mapgifxvqp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mapgifxvqp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mapgifxvqp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mapgifxvqp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mapgifxvqp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mapgifxvqp .gt_sourcenote {
  font-size: 12px;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mapgifxvqp .gt_left {
  text-align: left;
}

#mapgifxvqp .gt_center {
  text-align: center;
}

#mapgifxvqp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mapgifxvqp .gt_font_normal {
  font-weight: normal;
}

#mapgifxvqp .gt_font_bold {
  font-weight: bold;
}

#mapgifxvqp .gt_font_italic {
  font-style: italic;
}

#mapgifxvqp .gt_super {
  font-size: 65%;
}

#mapgifxvqp .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#mapgifxvqp .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#mapgifxvqp .gt_indent_1 {
  text-indent: 5px;
}

#mapgifxvqp .gt_indent_2 {
  text-indent: 10px;
}

#mapgifxvqp .gt_indent_3 {
  text-indent: 15px;
}

#mapgifxvqp .gt_indent_4 {
  text-indent: 20px;
}

#mapgifxvqp .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" style="border-bottom-width: 3px; border-bottom-style: solid; border-bottom-color: black;" scope="col" id="SEQUENCE_LAB">SEQUENCE_LAB</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-bottom-width: 3px; border-bottom-style: solid; border-bottom-color: black;" scope="col" id="Complete">Complete</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-bottom-width: 3px; border-bottom-style: solid; border-bottom-color: black;" scope="col" id="Failed">Failed</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-bottom-width: 3px; border-bottom-style: solid; border-bottom-color: black;" scope="col" id="Low Quality">Low Quality</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-bottom-width: 3px; border-bottom-style: solid; border-bottom-color: black;" scope="col" id="Not Done">Not Done</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-bottom-width: 3px; border-bottom-style: solid; border-bottom-color: black;" scope="col" id="(Missing)">(Missing)</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">UW Virology</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #3F007D; color: #FFFFFF;">67642</td>
<td headers="Failed" class="gt_row gt_right">1507</td>
<td headers="Low Quality" class="gt_row gt_right">648</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">2</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">PHL</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #ADACD2; color: #000000;">29497</td>
<td headers="Failed" class="gt_row gt_right">2497</td>
<td headers="Low Quality" class="gt_row gt_right">850</td>
<td headers="Not Done" class="gt_row gt_right">1</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">Labcorp</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #D2D3E7; color: #000000;">19029</td>
<td headers="Failed" class="gt_row gt_right">7530</td>
<td headers="Low Quality" class="gt_row gt_right">37</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">1</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">NW Genomics</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #DDDCEC; color: #000000;">15851</td>
<td headers="Failed" class="gt_row gt_right">523</td>
<td headers="Low Quality" class="gt_row gt_right">2158</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">Quest</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #F6F4F9; color: #000000;">3923</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">198</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">Altius</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #F7F5FA; color: #000000;">3523</td>
<td headers="Failed" class="gt_row gt_right">140</td>
<td headers="Low Quality" class="gt_row gt_right">33</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">Fulgent Genetics</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #F8F6FA; color: #000000;">2859</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">PHL/Bedford</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #F8F6FA; color: #000000;">2857</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">SCAN/Bedford</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FAF9FC; color: #000000;">996</td>
<td headers="Failed" class="gt_row gt_right">1</td>
<td headers="Low Quality" class="gt_row gt_right">7</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">Aegis</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FBF9FC; color: #000000;">934</td>
<td headers="Failed" class="gt_row gt_right">4</td>
<td headers="Low Quality" class="gt_row gt_right">5</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">Curative Labs</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FBFAFC; color: #000000;">623</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">26</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">KP WA Research Inst</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">281</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">USAFSAM</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">275</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">CDC</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">207</td>
<td headers="Failed" class="gt_row gt_right">3</td>
<td headers="Low Quality" class="gt_row gt_right">1</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">Providence Swedish</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">173</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">Helix</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">143</td>
<td headers="Failed" class="gt_row gt_right">8</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">Lauring Lab</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">118</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">Atlas Genomics</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">68</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">21</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">Boise VA</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">64</td>
<td headers="Failed" class="gt_row gt_right">3</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">OHSU</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">61</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">SFS/Bedford</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">48</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">5</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">IDBOL</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">40</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">Gravity Diagnostics</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">36</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">ASU</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">33</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">OSPHL</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">14</td>
<td headers="Failed" class="gt_row gt_right">1</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">USAMRIID</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">9</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">Infinity Biologix</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">7</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">Grubaugh Lab</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">2</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">Montana Public Health Lab</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">2</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">Flow Diagnostics</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">1</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">Grittman Medical Center</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">1</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">Naval Health Research Center</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">1</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">NW GENOMICS</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">1</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">Providence_Swedish</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">1</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">SCAB/Bedford</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">1</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">SFS/ Bedford</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">1</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">The Jackson Laboratory</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">1</td>
<td headers="Failed" class="gt_row gt_right">—</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">—</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">(Missing)</td>
<td headers="Complete" class="gt_row gt_right" style="background-color: #FCFBFD; color: #000000;">1</td>
<td headers="Failed" class="gt_row gt_right">1</td>
<td headers="Low Quality" class="gt_row gt_right">—</td>
<td headers="Not Done" class="gt_row gt_right">—</td>
<td headers="(Missing)" class="gt_row gt_right">16</td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_center">Total</td>
<td headers="Complete" class="gt_row gt_right">149324</td>
<td headers="Failed" class="gt_row gt_right">12218</td>
<td headers="Low Quality" class="gt_row gt_right">3989</td>
<td headers="Not Done" class="gt_row gt_right">1</td>
<td headers="(Missing)" class="gt_row gt_right">19</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
</figure>
</div></div></div>
</div></div>
</section>
<section id="counts-by-lab-1" class="level1">
<h1>Counts by lab</h1>
<p>These are counts before we switched over to the 2.0 pipeline</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [7]:</pre></div><div class="cell">

<div class="cell-container"><div class="cell-decorator"><pre>In [8]:</pre></div><div><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>(count_by_lab <span class="ot">&lt;-</span> wdrs_seq <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(SEQUENCE_LAB) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    n,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x_scaled =</span> n <span class="sc">/</span> <span class="fu">nrow</span>(wdrs_seq) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">.by =</span> SEQUENCE_LAB</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt_plt_bar_pct</span>(</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">column =</span> x_scaled,</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">scaled =</span> <span class="cn">TRUE</span>,</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="cn">TRUE</span>,</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">font_size =</span> <span class="st">"12px"</span>,</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"#8b7d7b"</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="fu">md</span>(<span class="st">"Number of Sequences by Lab"</span>),</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>             <span class="at">subtitle =</span> <span class="fu">md</span>(<span class="st">"Before 2023-06-01 switch to 2.0 pipeline"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> n,</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">0</span>,</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">use_seps =</span> T</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">SEQUENCE_LAB =</span> <span class="st">'Sequencing Lab'</span>,</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="st">'Count'</span>,</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">x_scaled =</span> <span class="st">'Percent of Total Sequences'</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">style_table</span>()</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div><div id="tbl-labcount" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-labcount-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Count of sequences by lab and status during the sequencing pipeline 1.0 phase
</figcaption>
<div aria-describedby="tbl-labcount-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="itithtszcp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>@import url("https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
#itithtszcp table {
  font-family: Roboto, system-ui, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#itithtszcp thead, #itithtszcp tbody, #itithtszcp tfoot, #itithtszcp tr, #itithtszcp td, #itithtszcp th {
  border-style: none;
}

#itithtszcp p {
  margin: 0;
  padding: 0;
}

#itithtszcp .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #000000;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#itithtszcp .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#itithtszcp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#itithtszcp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#itithtszcp .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#itithtszcp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#itithtszcp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 3px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#itithtszcp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#itithtszcp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#itithtszcp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#itithtszcp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#itithtszcp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#itithtszcp .gt_spanner_row {
  border-bottom-style: hidden;
}

#itithtszcp .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#itithtszcp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#itithtszcp .gt_from_md > :first-child {
  margin-top: 0;
}

#itithtszcp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#itithtszcp .gt_row {
  padding-top: 3px;
  padding-bottom: 3px;
  padding-left: 10px;
  padding-right: 10px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#itithtszcp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 10px;
  padding-right: 10px;
}

#itithtszcp .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#itithtszcp .gt_row_group_first td {
  border-top-width: 2px;
}

#itithtszcp .gt_row_group_first th {
  border-top-width: 2px;
}

#itithtszcp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#itithtszcp .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#itithtszcp .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#itithtszcp .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#itithtszcp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#itithtszcp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#itithtszcp .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#itithtszcp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#itithtszcp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#itithtszcp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#itithtszcp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#itithtszcp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#itithtszcp .gt_sourcenote {
  font-size: 12px;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#itithtszcp .gt_left {
  text-align: left;
}

#itithtszcp .gt_center {
  text-align: center;
}

#itithtszcp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#itithtszcp .gt_font_normal {
  font-weight: normal;
}

#itithtszcp .gt_font_bold {
  font-weight: bold;
}

#itithtszcp .gt_font_italic {
  font-style: italic;
}

#itithtszcp .gt_super {
  font-size: 65%;
}

#itithtszcp .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#itithtszcp .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#itithtszcp .gt_indent_1 {
  text-indent: 5px;
}

#itithtszcp .gt_indent_2 {
  text-indent: 10px;
}

#itithtszcp .gt_indent_3 {
  text-indent: 15px;
}

#itithtszcp .gt_indent_4 {
  text-indent: 20px;
}

#itithtszcp .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" style="table-layout: fixed;" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <colgroup>
    <col>
    <col>
    <col style="width:100px;">
  </colgroup>
  <thead>
    <tr class="gt_heading">
      <td colspan="3" class="gt_heading gt_title gt_font_normal" style="">Number of Sequences by Lab</td>
    </tr>
    <tr class="gt_heading">
      <td colspan="3" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">Before 2023-06-01 switch to 2.0 pipeline</td>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" style="border-bottom-width: 3px; border-bottom-style: solid; border-bottom-color: black;" scope="col" id="Sequencing Lab">Sequencing Lab</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-bottom-width: 3px; border-bottom-style: solid; border-bottom-color: black;" scope="col" id="Count">Count</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" style="border-bottom-width: 3px; border-bottom-style: solid; border-bottom-color: black;" scope="col" id="Percent of Total Sequences">Percent of Total Sequences</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">UW Virology</td>
<td headers="n" class="gt_row gt_right">69,799</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:42.1616299508913%;height:16px;display:flex;align-items:center;justify-content:flex-start;position:relative;"><span style="color:#000000;position:absolute;left:0px;margin-left:5px;font-weight:bold;font-size:12px;">42.2%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">PHL</td>
<td headers="n" class="gt_row gt_right">32,845</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:19.8398076725601%;height:16px;display:flex;align-items:center;justify-content:flex-start;position:relative;"><span style="color:#000000;position:absolute;left:0px;margin-left:5px;font-weight:bold;font-size:12px;">19.8%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">Labcorp</td>
<td headers="n" class="gt_row gt_right">26,597</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:16.0657440909448%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:16.0657440909448px;font-weight:bold;font-size:12px;">16.1%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">NW Genomics</td>
<td headers="n" class="gt_row gt_right">18,532</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:11.1941335298488%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:11.1941335298488px;font-weight:bold;font-size:12px;">11.2%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">Quest</td>
<td headers="n" class="gt_row gt_right">4,121</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:2.48926312737465%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:2.48926312737465px;font-weight:bold;font-size:12px;">2.5%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">Altius</td>
<td headers="n" class="gt_row gt_right">3,696</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:2.2325446539133%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:2.2325446539133px;font-weight:bold;font-size:12px;">2.2%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">Fulgent Genetics</td>
<td headers="n" class="gt_row gt_right">2,859</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:1.72696027206118%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:1.72696027206118px;font-weight:bold;font-size:12px;">1.7%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">PHL/Bedford</td>
<td headers="n" class="gt_row gt_right">2,857</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:1.72575218512724%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:1.72575218512724px;font-weight:bold;font-size:12px;">1.7%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">SCAN/Bedford</td>
<td headers="n" class="gt_row gt_right">1,004</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.606459640835755%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.606459640835755px;font-weight:bold;font-size:12px;">0.6%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">Aegis</td>
<td headers="n" class="gt_row gt_right">943</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.569612989350714%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.569612989350714px;font-weight:bold;font-size:12px;">0.6%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">Curative Labs</td>
<td headers="n" class="gt_row gt_right">649</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.392024210062156%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.392024210062156px;font-weight:bold;font-size:12px;">0.4%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">KP WA Research Inst</td>
<td headers="n" class="gt_row gt_right">281</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.169736214217975%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.169736214217975px;font-weight:bold;font-size:12px;">0.2%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">USAFSAM</td>
<td headers="n" class="gt_row gt_right">275</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.166111953416168%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.166111953416168px;font-weight:bold;font-size:12px;">0.2%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">CDC</td>
<td headers="n" class="gt_row gt_right">211</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.127453171530223%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.127453171530223px;font-weight:bold;font-size:12px;">0.1%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">Providence Swedish</td>
<td headers="n" class="gt_row gt_right">173</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.104499519785444%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.104499519785444px;font-weight:bold;font-size:12px;">0.1%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">Helix</td>
<td headers="n" class="gt_row gt_right">151</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.0912105635121503%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.0912105635121503px;font-weight:bold;font-size:12px;">0.1%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">Lauring Lab</td>
<td headers="n" class="gt_row gt_right">118</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.0712771291022102%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.0712771291022102px;font-weight:bold;font-size:12px;">0.1%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">Atlas Genomics</td>
<td headers="n" class="gt_row gt_right">89</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.0537598685601416%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.0537598685601416px;font-weight:bold;font-size:12px;">0.1%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">Boise VA</td>
<td headers="n" class="gt_row gt_right">67</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.0404709122868482%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.0404709122868482px;font-weight:bold;font-size:12px;">0%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">OHSU</td>
<td headers="n" class="gt_row gt_right">61</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.0368466514850409%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.0368466514850409px;font-weight:bold;font-size:12px;">0%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">SFS/Bedford</td>
<td headers="n" class="gt_row gt_right">53</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.0320143037492978%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.0320143037492978px;font-weight:bold;font-size:12px;">0%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">IDBOL</td>
<td headers="n" class="gt_row gt_right">40</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.0241617386787153%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.0241617386787153px;font-weight:bold;font-size:12px;">0%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">Gravity Diagnostics</td>
<td headers="n" class="gt_row gt_right">36</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.0217455648108438%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.0217455648108438px;font-weight:bold;font-size:12px;">0%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">ASU</td>
<td headers="n" class="gt_row gt_right">33</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.0199334344099401%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.0199334344099401px;font-weight:bold;font-size:12px;">0%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">NA</td>
<td headers="n" class="gt_row gt_right">18</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.0108727824054219%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.0108727824054219px;font-weight:bold;font-size:12px;">0%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">OSPHL</td>
<td headers="n" class="gt_row gt_right">15</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.00906065200451824%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.00906065200451824px;font-weight:bold;font-size:12px;">0%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">USAMRIID</td>
<td headers="n" class="gt_row gt_right">9</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.00543639120271095%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.00543639120271095px;font-weight:bold;font-size:12px;">0%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">Infinity Biologix</td>
<td headers="n" class="gt_row gt_right">7</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.00422830426877518%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.00422830426877518px;font-weight:bold;font-size:12px;">0%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">Grubaugh Lab</td>
<td headers="n" class="gt_row gt_right">2</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.00120808693393577%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.00120808693393577px;font-weight:bold;font-size:12px;">0%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">Montana Public Health Lab</td>
<td headers="n" class="gt_row gt_right">2</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.00120808693393577%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.00120808693393577px;font-weight:bold;font-size:12px;">0%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">Flow Diagnostics</td>
<td headers="n" class="gt_row gt_right">1</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.000604043466967883%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.000604043466967883px;font-weight:bold;font-size:12px;">0%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">Grittman Medical Center</td>
<td headers="n" class="gt_row gt_right">1</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.000604043466967883%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.000604043466967883px;font-weight:bold;font-size:12px;">0%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">NW GENOMICS</td>
<td headers="n" class="gt_row gt_right">1</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.000604043466967883%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.000604043466967883px;font-weight:bold;font-size:12px;">0%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">Naval Health Research Center</td>
<td headers="n" class="gt_row gt_right">1</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.000604043466967883%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.000604043466967883px;font-weight:bold;font-size:12px;">0%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">Providence_Swedish</td>
<td headers="n" class="gt_row gt_right">1</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.000604043466967883%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.000604043466967883px;font-weight:bold;font-size:12px;">0%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">SCAB/Bedford</td>
<td headers="n" class="gt_row gt_right">1</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.000604043466967883%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.000604043466967883px;font-weight:bold;font-size:12px;">0%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">SFS/ Bedford</td>
<td headers="n" class="gt_row gt_right">1</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.000604043466967883%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.000604043466967883px;font-weight:bold;font-size:12px;">0%</span></div></div></td></tr>
    <tr><td headers="SEQUENCE_LAB" class="gt_row gt_left">The Jackson Laboratory</td>
<td headers="n" class="gt_row gt_right">1</td>
<td headers="x_scaled" class="gt_row gt_left"><div style="flex-grow:1;margin-left:8px;background:#e1e1e1;"><div style="background:#8b7d7b;width:0.000604043466967883%;height:16px;display:flex;align-items:center;justify-content:center;color:#000000;font-weight:bold;font-size:12px;position:relative;"><span style="color:#000000;position:absolute;left:0%;margin-left:0.000604043466967883px;font-weight:bold;font-size:12px;">0%</span></div></div></td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
</figure>
</div></div></div>
</div></div>
</section>
<section id="create-stacked-bar-plots" class="level1">
<h1>Create stacked bar plots</h1>
<p>created by Philip Crain</p>
<section id="proportion-plot" class="level2">
<h2 class="anchored" data-anchor-id="proportion-plot">Proportion Plot</h2>
<p>make a plot based on the proportion stratified by mode</p>
<p>note: a few labs switched from Template to ELR and they were not always hard cut offs. Need to combine data with the entire table in order to identify which records are template and which are coming from ELR.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [9]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>WDRS_Entire <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(connection, <span class="st">"</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="st">  SELECT DISTINCT CASE_ID,</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="st">    FILLER__ORDER__NUM,</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="st">    SPECIMEN__COLLECTION__DTTM,</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="st">    SUBMITTER,</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="st">    PATIENT__CENTRIC__OBSERVATION,</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="st">    PATIENT__CENTRIC__OBSERVATION__VALUE,</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="st">    TEST__RESULT,</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="st">    TEST__RESULT__NOTE,</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="st">    TEST__REQUEST__NOTE</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="st">  FROM [dbo].[DD_ELR_DD_ENTIRE]</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="st">  WHERE WDRS__TEST__PERFORMED = 'SARS CoV-2 Sequencing'</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>wdrs_seq_prep <span class="ot">&lt;-</span> wdrs_seq <span class="sc">%&gt;%</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(SEQUENCE_ROSTER_PREPARE_DATE <span class="sc">&lt;</span> <span class="st">'2023-09-11'</span> <span class="sc">|</span> <span class="fu">is.na</span>(SEQUENCE_ROSTER_PREPARE_DATE)) <span class="sc">%&gt;%</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">sc_year =</span> lubridate<span class="sc">::</span><span class="fu">year</span>(CASE_CREATE_DATE),</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">in_elr =</span> <span class="fu">if_else</span>(CASE_ID <span class="sc">%in%</span> WDRS_Entire<span class="sc">$</span>CASE_ID,<span class="dv">1</span>,<span class="dv">0</span>),</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">submission_route =</span> <span class="fu">factor</span>(<span class="fu">case_when</span>(</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>      <span class="co"># str_detect(toupper(SEQUENCE_LAB),"AEGIS|HELIX|QUEST|LABCORP") ~ "ELR",</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>      <span class="co"># some labs have submitted template and ELR, so need a better way of finding them</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>      <span class="co"># use the ELR table to determine which are ELR</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>      in_elr <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"ELR"</span>,</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>      in_elr <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> <span class="fu">str_detect</span>(<span class="fu">toupper</span>(SEQUENCE_LAB),<span class="st">"PHL"</span>) <span class="sc">~</span> <span class="st">"PHL"</span>,</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"SFT"</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [10]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ggplot2' was built under R version 4.2.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>(prop_plot <span class="ot">&lt;-</span> wdrs_seq_prep <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>sc_year,<span class="at">fill=</span>submission_route)) <span class="sc">+</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">"fill"</span>) <span class="sc">+</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># scale_x_date() +</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="sc">~</span>.x<span class="sc">*</span><span class="dv">100</span>) <span class="sc">+</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"mistyrose2"</span>, <span class="st">"mistyrose3"</span>, <span class="st">"mistyrose4"</span>)) <span class="sc">+</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">'Proportion by Year'</span>,</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill=</span><span class="st">'Mode'</span>) <span class="sc">+</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">'Specimen Collection Date'</span>) <span class="sc">+</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">'Submission Count (%)'</span>) <span class="sc">+</span> </span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size=</span><span class="fu">rel</span>(<span class="dv">1</span>)),</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.x =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">'transparent'</span>),</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">'transparent'</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">'#78c2ad'</span>),</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major.x =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">'#78c2ad'</span>),</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">'#d6ede7'</span>),</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor.x =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">'#d6ede7'</span>),</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">'#d6ede7'</span>),</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">#legend.key = element_rect(fill = 'transparent'),</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># legend.position = "none" #remove legend to save space when next to the yearly version png</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="">
<figure class="figure">
<p class=""><a href="pipeline_counts_files/figure-html/unnamed-chunk-7-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="pipeline_counts_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div></div>
</section>
<section id="count-plot" class="level2">
<h2 class="anchored" data-anchor-id="count-plot">Count Plot</h2>
<div class="cell-container"><div class="cell-decorator"><pre>In [11]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Create yearly count stacked bar: --------------------------------</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>(count_plot <span class="ot">&lt;-</span> wdrs_seq_prep <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>sc_year, <span class="at">fill=</span>submission_route)) <span class="sc">+</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">'stack'</span>) <span class="sc">+</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># scale_x_date() +</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_comma</span>()) <span class="sc">+</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"mistyrose2"</span>, <span class="st">"mistyrose3"</span>, <span class="st">"mistyrose4"</span>)) <span class="sc">+</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">'Count by Year'</span>,</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill=</span><span class="st">'Mode'</span>) <span class="sc">+</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">'Specimen Collection Date'</span>) <span class="sc">+</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">'Submission Count (n)'</span>) <span class="sc">+</span> </span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size=</span><span class="fu">rel</span>(<span class="dv">1</span>)),</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.x =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">'transparent'</span>),</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">'transparent'</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">'#78c2ad'</span>),</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major.x =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">'#78c2ad'</span>),</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">'#d6ede7'</span>),</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor.x =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">'#d6ede7'</span>),</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">'#d6ede7'</span>),</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># legend.key = element_rect(fill = 'transparent'),</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">#legend.position = "none" #remove legend to save space when next to the yearly version png</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="">
<figure class="figure">
<p class=""><a href="pipeline_counts_files/figure-html/unnamed-chunk-8-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="pipeline_counts_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div></div>
</section>
</section>
<section id="combine-the-plots" class="level1">
<h1>Combine the plots</h1>
<p>Use patchwork to combine the plots</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [12]:</pre></div><div id="cell-fig-countprop" class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>(prop_plot <span class="sc">+</span> count_plot) <span class="sc">+</span> </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">guides=</span><span class="st">"collect"</span>, <span class="at">axes =</span> <span class="st">"collect_x"</span>) <span class="sc">+</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">'Sars CoV-2 Sequencing Metadata Submissions by Mode'</span>,</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">'Proportion and Counts'</span>,</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">'Data collected from Feb. 2021 - Sep. 2023'</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-countprop" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-countprop-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="">
<a href="pipeline_counts_files/figure-html/fig-countprop-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Count and proportion of sequencing metadata submissions by mode"><img src="pipeline_counts_files/figure-html/fig-countprop-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-countprop-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Count and proportion of sequencing metadata submissions by mode
</figcaption>
</figure>
</div>
</div>
</div></div>
</section>
     </main>
<!-- /main column -->  <script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>  </div> <!-- /content -->  <script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script> 
  
</body></html>